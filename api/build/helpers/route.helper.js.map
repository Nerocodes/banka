{"version":3,"sources":["../../src/helpers/route.helper.js"],"names":["routeHelper","validateBody","schema","req","res","next","result","Joi","validate","body","error","json","status","details","message","value","schemas","authSchema","object","keys","email","string","required","firstName","lastName","password","type","isAdmin","authLoginSchema","createAccountSchema","valid","accountStatusSchema","debitCreditSchema","amount","number"],"mappings":"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","sourcesContent":["import Joi from 'joi';\r\n\r\nconst routeHelper = {\r\n  validateBody: schema => (req, res, next) => {\r\n    const result = Joi.validate(req.body, schema);\r\n    if (result.error) {\r\n      return res.json({\r\n        status: 400,\r\n        error: result.error.details[0].message,\r\n      }).status(400);\r\n    }\r\n\r\n    req.body = result.value;\r\n    return next();\r\n  },\r\n\r\n  schemas: {\r\n    authSchema: Joi.object().keys({\r\n      email: Joi.string().email().required()\r\n        .error(() => ({\r\n          message: 'A valid email address is required',\r\n        })),\r\n      firstName: Joi.string().required()\r\n        .error(() => ({\r\n          message: 'First Name is required',\r\n        })),\r\n      lastName: Joi.string().required()\r\n        .error(() => ({\r\n          message: 'Last Name is required',\r\n        })),\r\n      password: Joi.string().required()\r\n        .error(() => ({\r\n          message: 'Password is required',\r\n        })),\r\n      type: Joi.string(),\r\n      isAdmin: Joi.boolean(),\r\n    }),\r\n    authLoginSchema: Joi.object().keys({\r\n      email: Joi.string().email().required()\r\n        .error(() => ({\r\n          message: 'A valid email address is required',\r\n        })),\r\n      password: Joi.string().required()\r\n        .error(() => ({\r\n          message: 'Password is required',\r\n        })),\r\n    }),\r\n    createAccountSchema: Joi.object().keys({\r\n      type: Joi.string().required()\r\n        .valid(['savings', 'current'])\r\n        .error(() => ({\r\n          message: 'Account type must be savings or current and is required',\r\n        })),\r\n    }),\r\n    accountStatusSchema: Joi.object().keys({\r\n      status: Joi.string().required()\r\n        .valid(['active', 'dormant'])\r\n        .error(() => ({\r\n          message: 'Status must be active or dormant and is required',\r\n        })),\r\n    }),\r\n    debitCreditSchema: Joi.object().keys({\r\n      amount: Joi.number().required()\r\n        .error(() => ({\r\n          message: 'Amount must be a number and is required',\r\n        })),\r\n    }),\r\n  },\r\n};\r\n\r\nexport default routeHelper;\r\n"],"file":"route.helper.js"}